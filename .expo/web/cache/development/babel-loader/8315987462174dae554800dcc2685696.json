{"ast":null,"code":"global.swisscalc = global.swisscalc || {};\nglobal.swisscalc.calc = global.swisscalc.calc || {};\n\nglobal.swisscalc.calc.loanCalculator = function (termUnit) {\n  this._termUnit = typeof termUnit === \"undefined\" ? 1 : termUnit;\n  this._loanAmount = new global.swisscalc.display.numericDisplay();\n  this._loanTerm = new global.swisscalc.display.fixedPointDisplay(0);\n  this._downPayment = new global.swisscalc.display.numericDisplay();\n  this._interestRate = new global.swisscalc.display.numericDisplay();\n};\n\nglobal.swisscalc.calc.loanCalculator.TERM_UNIT_MONTHS = 1;\nglobal.swisscalc.calc.loanCalculator.TERM_UNIT_YEARS = 2;\n\nglobal.swisscalc.calc.loanCalculator.prototype.getTermMonths = function () {\n  var v = this._loanTerm.getDisplayValue();\n\n  return this._termUnit == global.swisscalc.calc.loanCalculator.TERM_UNIT_MONTHS ? v : v * 12;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getTermYears = function () {\n  var v = this._loanTerm.getDisplayValue();\n\n  return this._termUnit == global.swisscalc.calc.loanCalculator.TERM_UNIT_YEARS ? v : v / 12;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getLoanAmount = function () {\n  return this._loanAmount.getDisplayValue();\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getDownPayment = function () {\n  return this._downPayment.getDisplayValue();\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getDownPaymentPercent = function () {\n  return this.getDownPayment() / this.getLoanAmount() * 100.0;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getInterestRateDecimal = function () {\n  return this._interestRate.getDisplayValue() / 100.0;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getInterestRatePercentage = function () {\n  return this._interestRate.getDisplayValue();\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setTermMonths = function (term) {\n  this._loanTerm.setDisplayValue(term);\n\n  this._termUnit = global.swisscalc.calc.loanCalculator.TERM_UNIT_MONTHS;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setTermYears = function (term) {\n  this._loanTerm.setDisplayValue(term);\n\n  this._termUnit = global.swisscalc.calc.loanCalculator.TERM_UNIT_YEARS;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setLoanAmount = function (lAmount) {\n  this._loanAmount.setDisplayValue(lAmount);\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setDownPayment = function (dPayment) {\n  this._downPayment.setDisplayValue(dPayment);\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setDownPaymentPercent = function (perc) {\n  this._downPayment.setDisplayValue(perc / 100.0 * this.getLoanAmount());\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setInterestRateDecimal = function (decimal) {\n  this._interestRate.setDisplayValue(decimal * 100);\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.setInterestRatePercentage = function (perc) {\n  this._interestRate.setDisplayValue(perc);\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getTermDisplay = function () {\n  return this._loanTerm.getCurrentDisplay();\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getLoanAmountDisplay = function () {\n  return global.swisscalc.lib.format.asUSCurrency(this.getLoanAmount());\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getDownPaymentDisplay = function () {\n  return global.swisscalc.lib.format.asUSCurrency(this.getDownPayment());\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getInterestRateDisplay = function () {\n  return this._interestRate.getCurrentDisplay() + \"%\";\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getMonthlyPayment = function () {\n  var n = this.getTermMonths();\n  var i = this.getInterestRateDecimal() / 12.0;\n  var A = this.getLoanAmount() - this.getDownPayment();\n  if (i === 0 && n === 0) return A;\n  if (n === 0) return A;\n  if (i === 0) return A / n;\n  return i * A / (1 - Math.pow(1 + i, -1 * n));\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getTotalPayment = function (monthlyPayment) {\n  var n = this.getTermMonths();\n  return monthlyPayment * n;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getTotalInterest = function (monthlyPayment) {\n  var n = this.getTermMonths();\n  var A = this.getLoanAmount() - this.getDownPayment();\n  if (n === 0) return 0;\n  return monthlyPayment * n - A;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.getDisplay = function () {\n  var div = document.createElement(\"div\");\n  this.addDisplay(div);\n  return div;\n};\n\nglobal.swisscalc.calc.loanCalculator.prototype.addDisplay = function (div) {\n  var monthlyPayment = this.getMonthlyPayment();\n  var totalPayment = this.getTotalPayment(monthlyPayment);\n  var totalInterest = this.getTotalInterest(monthlyPayment);\n  monthlyPayment = global.swisscalc.lib.format.asUSCurrency(monthlyPayment);\n  totalPayment = global.swisscalc.lib.format.asUSCurrency(totalPayment);\n  totalInterest = global.swisscalc.lib.format.asUSCurrency(totalInterest);\n  div.style.fontFamily = \"\\\"Lucida Console\\\",Monaco,monospace\";\n  div.style.whiteSpace = \"pre\";\n  div.innerHTML = \"\";\n  div.innerHTML += \"  Monthly: \" + monthlyPayment + \"<br />\";\n  div.innerHTML += \" Interest: \" + totalInterest + \"<br />\";\n  div.innerHTML += \"    Total: \" + totalPayment;\n};","map":{"version":3,"sources":["C:/Users/dmitr/Desktop/ReactNative/Codempire/lib/swisscalc.calc.loanCalculator.js"],"names":["global","swisscalc","calc","loanCalculator","termUnit","_termUnit","_loanAmount","display","numericDisplay","_loanTerm","fixedPointDisplay","_downPayment","_interestRate","TERM_UNIT_MONTHS","TERM_UNIT_YEARS","prototype","getTermMonths","v","getDisplayValue","getTermYears","getLoanAmount","getDownPayment","getDownPaymentPercent","getInterestRateDecimal","getInterestRatePercentage","setTermMonths","term","setDisplayValue","setTermYears","setLoanAmount","lAmount","setDownPayment","dPayment","setDownPaymentPercent","perc","setInterestRateDecimal","decimal","setInterestRatePercentage","getTermDisplay","getCurrentDisplay","getLoanAmountDisplay","lib","format","asUSCurrency","getDownPaymentDisplay","getInterestRateDisplay","getMonthlyPayment","n","i","A","Math","pow","getTotalPayment","monthlyPayment","getTotalInterest","getDisplay","div","document","createElement","addDisplay","totalPayment","totalInterest","style","fontFamily","whiteSpace","innerHTML"],"mappings":"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","sourcesContent":["//\r\n// Eric Morgan\r\n// Copyright (c) 2014. \r\n//\r\n\r\n// Class for implementing a loan calculator\r\n\r\nglobal.swisscalc = global.swisscalc || {};\r\nglobal.swisscalc.calc = global.swisscalc.calc || {};\r\nglobal.swisscalc.calc.loanCalculator = function(termUnit) {\r\n\tthis._termUnit \t\t= (typeof termUnit === \"undefined\") ? 1 : termUnit;\t// Default: TERM_UNIT_MONTHS\r\n\tthis._loanAmount \t= new global.swisscalc.display.numericDisplay();\t\t\t// Unit: Dollars\r\n\tthis._loanTerm \t\t= new global.swisscalc.display.fixedPointDisplay(0);\t\t// Unit: Months\r\n\tthis._downPayment \t= new global.swisscalc.display.numericDisplay();\t\t\t// Unit: Dollars\r\n\tthis._interestRate \t= new global.swisscalc.display.numericDisplay();\t\t\t// Unit: Decimal (I.e. 0.01 == 1%)\r\n};\r\n\r\n// Constants...\r\nglobal.swisscalc.calc.loanCalculator.TERM_UNIT_MONTHS = 1;\r\nglobal.swisscalc.calc.loanCalculator.TERM_UNIT_YEARS = 2;\r\n\r\n// Getters...\r\nglobal.swisscalc.calc.loanCalculator.prototype.getTermMonths \t\t\t\t= function() { var v = this._loanTerm.getDisplayValue(); return (this._termUnit == global.swisscalc.calc.loanCalculator.TERM_UNIT_MONTHS) ? v : v * 12; };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getTermYears \t\t\t\t= function() { var v = this._loanTerm.getDisplayValue(); return (this._termUnit == global.swisscalc.calc.loanCalculator.TERM_UNIT_YEARS) ? v : v / 12; };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getLoanAmount \t\t\t\t= function() { return this._loanAmount.getDisplayValue(); };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getDownPayment \t\t\t\t= function() { return this._downPayment.getDisplayValue(); };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getDownPaymentPercent \t\t= function() { return (this.getDownPayment() / this.getLoanAmount()) * 100.0; };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getInterestRateDecimal \t\t= function() { return this._interestRate.getDisplayValue() / 100.0; };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getInterestRatePercentage \t= function() { return this._interestRate.getDisplayValue(); };\r\n\r\n// Setters...\r\nglobal.swisscalc.calc.loanCalculator.prototype.setTermMonths \t\t\t\t= function(term) { this._loanTerm.setDisplayValue(term); this._termUnit = global.swisscalc.calc.loanCalculator.TERM_UNIT_MONTHS; };\t// Set term in months\r\nglobal.swisscalc.calc.loanCalculator.prototype.setTermYears  \t\t\t\t= function(term) { this._loanTerm.setDisplayValue(term); this._termUnit = global.swisscalc.calc.loanCalculator.TERM_UNIT_YEARS; };\t\t// Set term in years\r\nglobal.swisscalc.calc.loanCalculator.prototype.setLoanAmount \t\t\t\t= function(lAmount) { this._loanAmount.setDisplayValue(lAmount); };\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Set the loan amount\r\nglobal.swisscalc.calc.loanCalculator.prototype.setDownPayment \t\t\t\t= function(dPayment) { this._downPayment.setDisplayValue(dPayment); };\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Set the down payment\r\nglobal.swisscalc.calc.loanCalculator.prototype.setDownPaymentPercent \t\t= function(perc) { this._downPayment.setDisplayValue((perc/100.0) * this.getLoanAmount()); };\t\t\t\t\t\t\t\t\t// Set down payment as percentage of loan\t\t\t\t\r\nglobal.swisscalc.calc.loanCalculator.prototype.setInterestRateDecimal \t\t= function(decimal) { this._interestRate.setDisplayValue(decimal * 100); };\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Set interest rate as a decimal\r\nglobal.swisscalc.calc.loanCalculator.prototype.setInterestRatePercentage \t= function(perc) { this._interestRate.setDisplayValue(perc); };\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Set interest rate by percentage (e.g. 12 == 12%)\r\n\r\n// Display functions...\r\nglobal.swisscalc.calc.loanCalculator.prototype.getTermDisplay\t\t\t\t= function() { return this._loanTerm.getCurrentDisplay(); };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getLoanAmountDisplay \t\t= function() { return global.swisscalc.lib.format.asUSCurrency(this.getLoanAmount()); };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getDownPaymentDisplay \t\t= function() { return global.swisscalc.lib.format.asUSCurrency(this.getDownPayment()); };\r\nglobal.swisscalc.calc.loanCalculator.prototype.getInterestRateDisplay \t\t= function() { return this._interestRate.getCurrentDisplay() + \"%\"; };\r\n\r\n// Returns the total monthly payment to be paid on this loan\r\nglobal.swisscalc.calc.loanCalculator.prototype.getMonthlyPayment = function() {\r\n\tvar n = this.getTermMonths();\r\n\tvar i = this.getInterestRateDecimal() / 12.0;\r\n\tvar A = this.getLoanAmount() - this.getDownPayment();\r\n\t\r\n\t// If no interest and no term, return full amount...\r\n\tif (i === 0 && n === 0)\r\n\t\treturn A;\r\n\t\t\r\n\t// If no term, just return full amount...\r\n\tif (n === 0)\r\n\t\treturn A;\r\n\t\t\t\r\n\t// If no interest, just divide by terms...\r\n\tif (i === 0)\r\n\t\treturn A / n;\r\n\t\r\n\t// Standard formula...\r\n\treturn (i * A) / (1 - Math.pow(1 + i, -1 * n));\r\n};\r\n\r\n// Returns the total payment to be paid on this loan\r\nglobal.swisscalc.calc.loanCalculator.prototype.getTotalPayment = function(monthlyPayment) {\r\n\tvar n = this.getTermMonths();\r\n\treturn monthlyPayment * n;\r\n};\r\n\r\n// Returns the total interest to be paid on this loan\r\nglobal.swisscalc.calc.loanCalculator.prototype.getTotalInterest = function(monthlyPayment) {\r\n\tvar n = this.getTermMonths();\r\n\tvar A = this.getLoanAmount() - this.getDownPayment();\r\n\t\r\n\t// If there was no term, just return 0 interest\r\n\tif (n === 0) return 0;\r\n\t\t\r\n\treturn monthlyPayment * n - A;\r\n};\r\n\r\n// Returns a div containing formatted output.\r\nglobal.swisscalc.calc.loanCalculator.prototype.getDisplay = function() {\r\n\tvar div = document.createElement(\"div\");\r\n\tthis.addDisplay(div);\r\n\treturn div;\r\n};\r\n\r\n// Adds the formatted output to the given div.\r\nglobal.swisscalc.calc.loanCalculator.prototype.addDisplay = function(div) {\r\n\t// Perform calculations...\r\n\tvar monthlyPayment \t= this.getMonthlyPayment();\r\n\tvar totalPayment   \t= this.getTotalPayment(monthlyPayment);\r\n\tvar totalInterest  \t= this.getTotalInterest(monthlyPayment);\r\n\t\r\n\t// Set formatting...\r\n\tmonthlyPayment \t= global.swisscalc.lib.format.asUSCurrency(monthlyPayment);\r\n\ttotalPayment   \t= global.swisscalc.lib.format.asUSCurrency(totalPayment);\r\n\ttotalInterest  \t= global.swisscalc.lib.format.asUSCurrency(totalInterest);\r\n\t\r\n\t// Build output div...\r\n\tdiv.style.fontFamily = \"\\\"Lucida Console\\\",Monaco,monospace\";\r\n\tdiv.style.whiteSpace = \"pre\";\r\n\tdiv.innerHTML = \"\";\r\n\tdiv.innerHTML += \"  Monthly: \" + monthlyPayment\t+ \"<br />\";\r\n\tdiv.innerHTML += \" Interest: \" + totalInterest\t+ \"<br />\";\r\n\tdiv.innerHTML += \"    Total: \" + totalPayment;\r\n};"]},"metadata":{},"sourceType":"script"}